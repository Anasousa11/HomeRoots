{% extends 'core/base.html' %}
{% block content %}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card border-0 shadow-sm">
        <div class="card-body p-5">
          <h2 class="card-title mb-1" style="color: var(--text-dark); font-weight: 600;">
            {% if form.instance.pk %}
              Edit Lesson
            {% else %}
              Create New Lesson
            {% endif %}
          </h2>
          <p class="text-muted mb-4" style="color: var(--text-light);">
            {% if form.instance.pk %}
              Update the lesson details below
            {% else %}
              Fill in the details to create a new lesson
            {% endif %}
          </p>

          <form method="post" enctype="multipart/form-data">
            {% csrf_token %}

            <!-- Title -->
            <div class="mb-4">
              <label class="form-label" style="color: var(--text-dark); font-weight: 600;">Lesson Title *</label>
              {{ form.title }}
              {% if form.title.errors %}
                <div class="invalid-feedback" style="display: block;">
                  {% for error in form.title.errors %}{{ error }}{% endfor %}
                </div>
              {% endif %}
            </div>

            <!-- Subject & Level (Side by side) -->
            <div class="row mb-4">
              <div class="col-md-6">
                <label class="form-label" style="color: var(--text-dark); font-weight: 600;">Subject *</label>
                {{ form.subject }}
                {% if form.subject.errors %}
                  <div class="invalid-feedback" style="display: block;">
                    {% for error in form.subject.errors %}{{ error }}{% endfor %}
                  </div>
                {% endif %}
              </div>
              <div class="col-md-6">
                <label class="form-label" style="color: var(--text-dark); font-weight: 600;">Grade Level *</label>
                {{ form.level }}
                {% if form.level.errors %}
                  <div class="invalid-feedback" style="display: block;">
                    {% for error in form.level.errors %}{{ error }}{% endfor %}
                  </div>
                {% endif %}
              </div>
            </div>

            <!-- Description -->
            <div class="mb-4">
              <label class="form-label" style="color: var(--text-dark); font-weight: 600;">Description *</label>
              {{ form.description }}
              {% if form.description.errors %}
                <div class="invalid-feedback" style="display: block;">
                  {% for error in form.description.errors %}{{ error }}{% endfor %}
                </div>
              {% endif %}
            </div>

            <!-- Learning Objectives -->
            <div class="mb-4">
              <label class="form-label" style="color: var(--text-dark); font-weight: 600;">Learning Objectives *</label>
              <small class="d-block mb-2" style="color: var(--text-light);">What will students learn? (Separate multiple objectives with line breaks)</small>
              {{ form.objectives }}
              {% if form.objectives.errors %}
                <div class="invalid-feedback" style="display: block;">
                  {% for error in form.objectives.errors %}{{ error }}{% endfor %}
                </div>
              {% endif %}
            </div>

            <!-- Materials -->
            <div class="mb-4">
              <label class="form-label" style="color: var(--text-dark); font-weight: 600;">Materials & Resources</label>
              <small class="d-block mb-2" style="color: var(--text-light);">List materials, links, and resources needed (optional)</small>
              {{ form.materials }}
              {% if form.materials.errors %}
                <div class="invalid-feedback" style="display: block;">
                  {% for error in form.materials.errors %}{{ error }}{% endfor %}
                </div>
              {% endif %}
            </div>

            <!-- Duration & Date (Side by side) -->
            <div class="row mb-4">
              <div class="col-md-6">
                <label class="form-label" style="color: var(--text-dark); font-weight: 600;">Duration (minutes)</label>
                {{ form.duration_minutes }}
                {% if form.duration_minutes.errors %}
                  <div class="invalid-feedback" style="display: block;">
                    {% for error in form.duration_minutes.errors %}{{ error }}{% endfor %}
                  </div>
                {% endif %}
              </div>
              <div class="col-md-6">
                <label class="form-label" style="color: var(--text-dark); font-weight: 600;">Lesson Date</label>
                {{ form.lesson_date }}
                {% if form.lesson_date.errors %}
                  <div class="invalid-feedback" style="display: block;">
                    {% for error in form.lesson_date.errors %}{{ error }}{% endfor %}
                  </div>
                {% endif %}
              </div>
            </div>

            <!-- Buttons -->
            <div style="display: flex; gap: 10px; margin-top: 30px;">
              <button type="submit" class="btn btn-success" style="background-color: var(--primary); border: none; flex: 1;">
                {% if form.instance.pk %}
                  Save Changes
                {% else %}
                  Create Lesson
                {% endif %}
              </button>
              <a href="{% url 'core:lesson_list' %}" class="btn btn-secondary" style="flex: 1; background-color: #6c757d; border: none;">Cancel</a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
